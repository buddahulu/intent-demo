# Agent Payment MVP - éƒ¨ç½²å®Œæˆ

## âœ… ç³»ç»ŸçŠ¶æ€

æ‰€æœ‰æœåŠ¡å·²æˆåŠŸéƒ¨ç½²å¹¶è¿è¡Œï¼

## ğŸŒ å…¬ç½‘è®¿é—®åœ°å€

| æœåŠ¡ | å…¬ç½‘ URL |
|------|----------|
| ğŸ” **Agent Registry** (å‘ç°æœåŠ¡) | https://soldiers-memo-galleries-handy.trycloudflare.com |
| ğŸ½ï¸ **Merchant Agent** (é¤å…æœåŠ¡) | https://leads-accepting-states-engine.trycloudflare.com |
| ğŸ‘¤ **User Agent** (ç”¨æˆ·å¯¹è¯) | https://some-fixtures-wishlist-doing.trycloudflare.com |

## ğŸ“ é¡¹ç›®æ–‡ä»¶

```
/root/.openclaw/workspace/agent-payment-mvp/
â”œâ”€â”€ services/
â”‚   â””â”€â”€ registry.js          # Agent æ³¨å†Œä¸å‘ç°æœåŠ¡ (ç«¯å£ 3001)
â”œâ”€â”€ agents/
â”‚   â”œâ”€â”€ merchant.js          # å•†æˆ· Agent - ç¾å‘³è½©ä¸­é¤å… (ç«¯å£ 3002)
â”‚   â””â”€â”€ user-agent.js        # ç”¨æˆ· Agent - è‡ªç„¶è¯­è¨€æ¥å£ (ç«¯å£ 3003)
â”œâ”€â”€ shared/
â”‚   â””â”€â”€ database.js          # å†…å­˜æ•°æ®åº“
â”œâ”€â”€ test/
â”‚   â””â”€â”€ test.js              # æµ‹è¯•è„šæœ¬
â”œâ”€â”€ README.md                # é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ API.md                   # API æ¥å£æ–‡æ¡£
â”œâ”€â”€ manage.sh                # æœåŠ¡ç®¡ç†è„šæœ¬
â””â”€â”€ package.json
```

## ğŸ§ª å¿«é€Ÿæµ‹è¯•

### 1. å¥åº·æ£€æŸ¥
```bash
curl https://soldiers-memo-galleries-handy.trycloudflare.com/health
curl https://leads-accepting-states-engine.trycloudflare.com/health
curl https://some-fixtures-wishlist-doing.trycloudflare.com/health
```

### 2. æœç´¢é¤å…
```bash
curl "https://soldiers-memo-galleries-handy.trycloudflare.com/api/agents/search?type=restaurant"
```

### 3. è·å–èœå•
```bash
curl https://leads-accepting-states-engine.trycloudflare.com/api/menu
```

### 4. è‡ªç„¶è¯­è¨€é¢„è®¢
```bash
curl -X POST https://some-fixtures-wishlist-doing.trycloudflare.com/api/book \
  -H "Content-Type: application/json" \
  -d '{"message": "è®¢ä¸ªé¤å…ï¼Œ4äººï¼Œä»Šæ™š", "userId": "user_123"}'
```

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### 1. Agent Registry (å‘ç°æœåŠ¡)
- âœ… å•†æˆ· Agent æ³¨å†Œæ¥å£
- âœ… ç”¨æˆ· Agent æœç´¢æ¥å£
- âœ… æ”¯æŒæŒ‰ä½ç½®ã€æœåŠ¡ç±»å‹ç­›é€‰
- âœ… é¢„è®¢è®°å½•ç®¡ç†

### 2. Merchant Agent (é¤å…ç¤ºä¾‹)
- âœ… HTTP æ¥å£æ¥æ”¶é¢„è®¢è¯·æ±‚
- âœ… è¿”å›èœå•ã€å¯ç”¨æ—¶é—´ã€ä»·æ ¼
- âœ… ç¡®è®¤/æ‹’ç»é¢„è®¢
- âœ… æ™ºèƒ½èœå“æ¨è

### 3. User Agent (OpenClaw é›†æˆ)
- âœ… æ¥æ”¶ç”¨æˆ·è‡ªç„¶è¯­è¨€è¾“å…¥
- âœ… è°ƒç”¨å‘ç°æœåŠ¡æœç´¢å•†æˆ·
- âœ… ä¸å•†æˆ· Agent å¯¹è¯å®Œæˆé¢„è®¢
- âœ… è¿”å›äººæ€§åŒ–ç»“æœç»™ç”¨æˆ·

### 4. å…¬ç½‘éƒ¨ç½²
- âœ… Cloudflare Tunnel å…¬ç½‘è®¿é—®
- âœ… ä¸‰ä¸ªæœåŠ¡å‡å¯äº’ç›¸è®¿é—®
- âœ… æ”¯æŒ HTTPS

## ğŸ“Š ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ç”¨æˆ· (User)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ è‡ªç„¶è¯­è¨€
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¤ User Agent (ç”¨æˆ· Agent)                                  â”‚
â”‚  - è§£æç”¨æˆ·æ„å›¾ (äººæ•°ã€æ—¶é—´ã€ä½ç½®)                              â”‚
â”‚  - è°ƒç”¨å‘ç°æœåŠ¡æœç´¢å•†æˆ·                                        â”‚
â”‚  - ä¸å•†æˆ· Agent å¯¹è¯å®Œæˆé¢„è®¢                                   â”‚
â”‚  - è¿”å›äººæ€§åŒ–å›å¤                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ HTTP API
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ” Agent Registry (å‘ç°æœåŠ¡)                                â”‚
â”‚  - å•†æˆ·æ³¨å†Œ/å‘ç°                                             â”‚
â”‚  - æœåŠ¡ç±»å‹ç´¢å¼•                                              â”‚
â”‚  - é¢„è®¢è®°å½•ç®¡ç†                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ HTTP API
                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ½ï¸ Merchant Agent (å•†æˆ· Agent)                              â”‚
â”‚  - é¤å…ä¿¡æ¯æŸ¥è¯¢                                              â”‚
â”‚  - èœå•å±•ç¤º (8é“å·èœ)                                        â”‚
â”‚  - å¯ç”¨æ€§æŸ¥è¯¢ (æ¡Œä½ã€æ—¶é—´)                                    â”‚
â”‚  - é¢„è®¢ç®¡ç† (åˆ›å»ºã€æŸ¥è¯¢ã€å–æ¶ˆ)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ æŠ€æœ¯æ ˆ

- **Node.js** v22.22.0
- **Express** v4.18.2
- **å†…å­˜å­˜å‚¨** (å¯åˆ‡æ¢ SQLite)
- **Cloudflare Tunnel** (å…¬ç½‘è®¿é—®)

## ğŸš€ æœ¬åœ°ç®¡ç†

```bash
cd /root/.openclaw/workspace/agent-payment-mvp

# å¯åŠ¨æ‰€æœ‰æœåŠ¡
./manage.sh all

# æŸ¥çœ‹çŠ¶æ€
./manage.sh status

# æµ‹è¯•æœåŠ¡
./manage.sh test

# åœæ­¢æœåŠ¡
./manage.sh stop
```

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **Cloudflare Tunnel** æ˜¯ä¸´æ—¶æ€§çš„ï¼Œé‡å¯åä¼šç”Ÿæˆæ–°çš„ URL
2. æ•°æ®å­˜å‚¨åœ¨å†…å­˜ä¸­ï¼ŒæœåŠ¡é‡å¯åæ•°æ®ä¼šä¸¢å¤±
3. å¦‚éœ€æŒä¹…åŒ–ï¼Œå¯åˆ‡æ¢åˆ° SQLite ç‰ˆæœ¬
4. æ‰€æœ‰ API æ”¯æŒ CORSï¼Œå¯ä»æµè§ˆå™¨ç›´æ¥è°ƒç”¨

## ğŸ“š è¯¦ç»†æ–‡æ¡£

- [API.md](./API.md) - å®Œæ•´çš„ API æ¥å£æ–‡æ¡£
- [README.md](./README.md) - é¡¹ç›®è¯´æ˜æ–‡æ¡£

---

**éƒ¨ç½²æ—¶é—´**: 2026-02-27 04:32 CST  
**çŠ¶æ€**: âœ… è¿è¡Œæ­£å¸¸
