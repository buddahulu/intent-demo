<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ„å›¾ç”µå•† Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            width: 100%;
            max-width: 480px;
            background: white;
            border-radius: 24px;
            box-shadow: 0 25px 50px -12px rgba(0,0,0,0.25);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 32px 24px;
            text-align: center;
        }

        .header h1 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .header p {
            opacity: 0.9;
            font-size: 14px;
        }

        .chat-area {
            height: 400px;
            overflow-y: auto;
            padding: 24px;
            background: #f8fafc;
        }

        .message {
            display: flex;
            margin-bottom: 16px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.bot {
            justify-content: flex-start;
        }

        .message.user {
            justify-content: flex-end;
        }

        .bubble {
            max-width: 80%;
            padding: 12px 16px;
            border-radius: 20px;
            font-size: 14px;
            line-height: 1.5;
        }

        .message.bot .bubble {
            background: white;
            color: #1f2937;
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .message.user .bubble {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-bottom-right-radius: 4px;
        }

        .quick-replies {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 12px;
            padding-left: 8px;
        }

        .quick-btn {
            background: white;
            border: 1px solid #e5e7eb;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 13px;
            color: #4b5563;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quick-btn:hover {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .input-area {
            padding: 16px 24px 24px;
            background: white;
            border-top: 1px solid #e5e7eb;
        }

        .input-wrapper {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .input-field {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e5e7eb;
            border-radius: 24px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.2s;
        }

        .input-field:focus {
            border-color: #667eea;
        }

        .send-btn {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .send-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
        }

        .send-btn svg {
            width: 20px;
            height: 20px;
        }

        .product-card {
            background: white;
            border-radius: 16px;
            padding: 16px;
            margin-top: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            display: flex;
            gap: 12px;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .product-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.12);
        }

        .product-img {
            width: 80px;
            height: 80px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
        }

        .product-info {
            flex: 1;
        }

        .product-name {
            font-weight: 600;
            color: #1f2937;
            margin-bottom: 4px;
        }

        .product-desc {
            font-size: 12px;
            color: #6b7280;
            margin-bottom: 8px;
        }

        .product-price {
            font-size: 18px;
            font-weight: 700;
            color: #dc2626;
        }

        .product-tag {
            display: inline-block;
            background: #fef3c7;
            color: #92400e;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            margin-left: 8px;
        }

        .typing {
            display: flex;
            gap: 4px;
            padding: 12px 16px;
            background: white;
            border-radius: 20px;
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            width: fit-content;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background: #d1d5db;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-10px);
            }
        }

        .status-bar {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            background: #ecfdf5;
            border-radius: 20px;
            font-size: 12px;
            color: #059669;
            margin-bottom: 16px;
            width: fit-content;
        }

        .status-dot {
            width: 8px;
            height: 8px;
            background: #10b981;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                opacity: 1;
            }
            50% {
                opacity: 0.5;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ æ™ºèƒ½è´­ç‰©åŠ©æ‰‹</h1>
            <p>å‘Šè¯‰æˆ‘ä½ çš„éœ€æ±‚ï¼Œæˆ‘å¸®ä½ æ‰¾åˆ°æœ€åˆé€‚çš„</p>
        </div>

        <div class="chat-area" id="chatArea">
            <div class="status-bar">
                <div class="status-dot"></div>
                <span>AI åŠ©æ‰‹åœ¨çº¿</span>
            </div>

            <div class="message bot">
                <div class="bubble">
                    ä½ å¥½ï¼æˆ‘æ˜¯ä½ çš„æ™ºèƒ½è´­ç‰©åŠ©æ‰‹ ğŸ‘‹<br><br>
                    æƒ³ä¹°ç‚¹ä»€ä¹ˆï¼Ÿå‘Šè¯‰æˆ‘ï¼š
                    <div class="quick-replies">
                        <button class="quick-btn" onclick="sendQuick('é€å¥³å‹ç¤¼ç‰©')">ğŸ é€å¥³å‹ç¤¼ç‰©</button>
                        <button class="quick-btn" onclick="sendQuick('åŠå…¬ç”¨å“')">ğŸ’¼ åŠå…¬ç”¨å“</button>
                        <button class="quick-btn" onclick="sendQuick('æ•°ç äº§å“')">ğŸ“± æ•°ç äº§å“</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="input-area">
            <div class="input-wrapper">
                <input 
                    type="text" 
                    class="input-field" 
                    id="userInput"
                    placeholder="è¾“å…¥ä½ çš„éœ€æ±‚ï¼Œæ¯”å¦‚ï¼š500å…ƒå·¦å³çš„ç”Ÿæ—¥ç¤¼ç‰©..."
                    onkeypress="handleKeyPress(event)"
                >
                <button class="send-btn" onclick="sendMessage()">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 2L11 13M22 2l-7 20-4-9-9-4 20-7z"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <script>
        let step = 0;
        let userIntent = {};

        function addMessage(text, isUser = false) {
            const chatArea = document.getElementById('chatArea');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'bot'}`;
            messageDiv.innerHTML = `<div class="bubble">${text}</div>`;
            chatArea.appendChild(messageDiv);
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        function showTyping() {
            const chatArea = document.getElementById('chatArea');
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot typing-indicator';
            typingDiv.innerHTML = `
                <div class="typing">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            `;
            chatArea.appendChild(typingDiv);
            chatArea.scrollTop = chatArea.scrollHeight;
            return typingDiv;
        }

        function removeTyping() {
            const indicator = document.querySelector('.typing-indicator');
            if (indicator) indicator.remove();
        }

        function addProductCard(name, desc, price, tag, emoji) {
            const chatArea = document.getElementById('chatArea');
            const cardDiv = document.createElement('div');
            cardDiv.className = 'message bot';
            cardDiv.innerHTML = `
                <div class="product-card" onclick="alert('è·³è½¬åˆ°è´­ä¹°é¡µé¢')">
                    <div class="product-img">${emoji}</div>
                    <div class="product-info">
                        <div class="product-name">${name}</div>
                        <div class="product-desc">${desc}</div>
                        <div>
                            <span class="product-price">Â¥${price}</span>
                            <span class="product-tag">${tag}</span>
                        </div>
                    </div>
                </div>
            `;
            chatArea.appendChild(cardDiv);
            chatArea.scrollTop = chatArea.scrollHeight;
        }

        function sendQuick(text) {
            document.getElementById('userInput').value = text;
            sendMessage();
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function sendMessage() {
            const input = document.getElementById('userInput');
            const text = input.value.trim();
            if (!text) return;

            addMessage(text, true);
            input.value = '';

            const typing = showTyping();

            setTimeout(() => {
                removeTyping();
                handleBotResponse(text);
            }, 800 + Math.random() * 600);
        }

        function handleBotResponse(userText) {
            const lowerText = userText.toLowerCase();

            if (step === 0) {
                // ç¬¬ä¸€è½®ï¼šè¯†åˆ«å¤§ç±» + é¢„ç®—
                if (lowerText.includes('å¥³å‹') || lowerText.includes('ç¤¼ç‰©') || lowerText.includes('å¥³ç”Ÿ')) {
                    userIntent.category = 'gift';
                    addMessage(`æ”¶åˆ°ï¼ç»™å¥³å‹é€‰ç¤¼ç‰© ğŸ<br><br>å¤§æ¦‚ä»€ä¹ˆé¢„ç®—ï¼Ÿ`, false);
                    showQuickReplies(['200å…ƒä»¥å†…', '200-500å…ƒ', '500-1000å…ƒ', '1000å…ƒä»¥ä¸Š']);
                } else if (lowerText.includes('åŠå…¬') || lowerText.includes('å·¥ä½œ')) {
                    userIntent.category = 'office';
                    addMessage(`åŠå…¬ç”¨å“äº†è§£ï¼ğŸ’¼<br><br>ä¸»è¦æ˜¯ï¼Ÿ`, false);
                    showQuickReplies(['æå‡æ•ˆç‡', 'æ¡Œé¢æ•´ç†', 'å¥åº·èˆ’é€‚']);
                } else if (lowerText.includes('æ•°ç ') || lowerText.includes('æ‰‹æœº') || lowerText.includes('ç”µè„‘')) {
                    userIntent.category = 'digital';
                    addMessage(`æ•°ç äº§å“ï¼ğŸ“±<br><br>é¢„ç®—èŒƒå›´ï¼Ÿ`, false);
                    showQuickReplies(['1000å…ƒå†…', '1000-3000å…ƒ', '3000-5000å…ƒ', '5000å…ƒä»¥ä¸Š']);
                } else {
                    addMessage(`äº†è§£ï¼"${userText}"<br><br>èƒ½å†è¯´è¯´é¢„ç®—å’Œä¸»è¦ç”¨é€”å—ï¼Ÿè¿™æ ·æˆ‘èƒ½æ›´ç²¾å‡†æ¨è ğŸ˜Š`, false);
                }
                step = 1;

            } else if (step === 1) {
                // ç¬¬äºŒè½®ï¼šç¡®è®¤éœ€æ±‚ + ç»™å‡ºæ¨è
                if (userIntent.category === 'gift') {
                    addMessage(`ğŸ‘Œ æ˜ç™½äº†ï¼<br>ç»™å¥³å‹ã€${userText}ã€æƒ³è¦æƒŠå–œæ„Ÿ<br><br>ä¸ºä½ ç²¾é€‰äº†è¿™å‡ æ¬¾ï¼š`, false);
                    
                    setTimeout(() => {
                        addProductCard(
                            'æˆ´æ£®å¹é£æœº HD15',
                            'å¥³ç”Ÿéƒ½æƒ³è¦çš„ç¤¼ç‰©ï¼Œå¹å¤´å‘å³äº«å—',
                            '2,999',
                            'çƒ­é”€çˆ†æ¬¾',
                            'ğŸ’¨'
                        );
                    }, 300);

                    setTimeout(() => {
                        addProductCard(
                            'SK-II ç¥ä»™æ°´ç¤¼ç›’',
                            'ç»å…¸æŠ¤è‚¤ï¼Œé€ç¤¼ä¸å‡ºé”™',
                            '1,590',
                            'å£ç¢‘ä¹‹é€‰',
                            'âœ¨'
                        );
                    }, 600);

                    setTimeout(() => {
                        addProductCard(
                            'æ‹ç«‹å¾— Mini 12',
                            'è®°å½•ç¾å¥½ç¬é—´ï¼Œä»ªå¼æ„Ÿæ»¡æ»¡',
                            '699',
                            'æ°›å›´æ„Ÿ',
                            'ğŸ“¸'
                        );
                    }, 900);

                } else if (userIntent.category === 'office') {
                    addMessage(`æ”¶åˆ°ï¼åŠå…¬åœºæ™¯ã€${userText}<br><br>æ¨èè¿™äº›ï¼š`, false);
                    
                    setTimeout(() => {
                        addProductCard(
                            'äººä½“å·¥å­¦æ¤…',
                            'ä¹…åä¸ç´¯ï¼Œä¿æŠ¤è…°æ¤',
                            '899',
                            'å¥åº·å¿…å¤‡',
                            'ğŸª‘'
                        );
                    }, 300);

                    setTimeout(() => {
                        addProductCard(
                            'å‡é™æ¡Œæ”¯æ¶',
                            'ç«™åäº¤æ›¿ï¼Œæå‡æ•ˆç‡',
                            '399',
                            'æ•ˆç‡å·¥å…·',
                            'â¬†ï¸'
                        );
                    }, 600);
                }

                step = 2;
            } else {
                // åç»­å¯¹è¯
                addMessage(`è¿˜æƒ³äº†è§£ä»€ä¹ˆï¼Ÿå¯ä»¥ç›´æ¥é—®æˆ‘ï¼Œæˆ–è€…ç‚¹å‡»ä¸Šé¢çš„å•†å“æŸ¥çœ‹è¯¦æƒ… ğŸ‘†`, false);
            }
        }

        function showQuickReplies(options) {
            const chatArea = document.getElementById('chatArea');
            const replyDiv = document.createElement('div');
            replyDiv.className = 'message bot';
            replyDiv.innerHTML = `
                <div class="quick-replies">
                    ${options.map(opt => `<button class="quick-btn" onclick="sendQuick('${opt}')">${opt}</button>`).join('')}
                </div>
            `;
            chatArea.appendChild(replyDiv);
            chatArea.scrollTop = chatArea.scrollHeight;
        }
    </script>
</body>
</html>