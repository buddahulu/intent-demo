# 意图电商系统：核心内容架构

## 一、用户画像层

| 维度 | 数据 | 用途 |
|:---|:---|:---|
| **基础属性** | 性别、年龄、城市、职业 | 初步场景判断 |
| **历史订单** | 购买记录、频次、客单价 | 消费能力 + 偏好预测 |
| **浏览行为** | 点击、收藏、加购、停留时长 | 实时兴趣捕捉 |
| **对话历史** | 过往咨询、反馈、评价 | 个性化话术 |
| **外部数据** | 节日、天气、热点事件 | 场景化触发 |

---

## 二、需求识别引擎（1-2轮完成）

### 第一轮：开放式探测
- **输入**："想买点什么？"
- **用户**：自然语言 或 快捷选择
- **系统提取**：品类意图 + 模糊场景

### 第二轮：结构化确认
- **系统**：用选择/填空方式确认关键变量
- **变量**：预算、对象、时间紧迫度、特殊要求
- **输出**：结构化需求标签

### 示例对话

```
用户：给女朋友买礼物
↓
系统：收到！给女友选礼物 🎁 三个快速问题：
      ① 预算？ [200] [500] [1000] [自定义]
      ② 场合？ [生日] [纪念日] [日常惊喜] [道歉]
      ③ 她偏好？ [美妆] [数码] [文艺] [实用]
↓
用户：500、生日、文艺
↓
系统：精准需求标签 → {品类:礼物, 对象:女友, 预算:500, 
                     场景:生日, 偏好:文艺, 紧迫:7天内}
```

---

## 三、推荐决策层

### 3.1 候选商品池筛选

| 过滤条件 | 说明 |
|:---|:---|
| 基础匹配 | 品类、价格区间、库存 |
| 场景匹配 | 节日包装、刻字服务、极速达 |
| 偏好匹配 | 品牌调性、设计风格、用户评价关键词 |
| 历史协同 | 相似用户购买、复购率、退货率 |

### 3.2 排序算法

```
综合得分 = 相关性分 × 0.4 + 口碑分 × 0.3 + 
          性价比分 × 0.2 + 转化预测分 × 0.1
```

### 3.3 可解释性生成（关键）

每款推荐必须附带 **"为什么选它"**：

| 维度 | 解释话术 |
|:---|:---|
| **需求匹配** | "符合你500元预算，且是文艺女生喜欢的手作风格" |
| **口碑依据** | "98%好评，女友收到这类礼物满意度最高" |
| **场景适配** | "支持生日刻字，7天内送达，刚好赶上" |
| **差异化** | "比热门口红更有惊喜感，避免撞礼物" |
| **个人关联** | "你去年买过同品牌香薰，品质认可" |

---

## 四、历史订单系统

### 4.1 数据结构

```json
{
  "order_id": "ORD_20250225_001",
  "timestamp": "2025-02-25T14:30:00Z",
  "intent_snapshot": {
    "raw_input": "送妈妈生日礼物",
    "extracted_tags": ["礼物", "母亲", "生日", "实用"]
  },
  "recommended_items": [
    {
      "sku": "MASAJE_001",
      "name": "倍轻松颈椎按摩仪",
      "price": 399,
      "explain": "妈妈辈实用礼物TOP3，缓解颈椎疲劳",
      "user_feedback": "accepted"
    }
  ],
  "final_choice": "MASAJE_001",
  "post_purchase": {
    "rating": 5,
    "review": "妈妈很喜欢，每天都用",
    "repurchase_intent": true
  }
}
```

### 4.2 历史数据应用

| 场景 | 用法 |
|:---|:---|
| **复购提醒** | "你上次买的面膜快用完了，要补货吗？" |
| **偏好继承** | "基于你给妈妈买礼物的记录，这次推荐..." |
| **效果验证** | "上次推荐的按摩仪，妈妈满意度98%" |
| **避免重复** | "今年换个新花样？去年送的是..." |

---

## 五、推荐解释引擎（核心差异化）

### 输出格式：每款商品一张"推荐理由卡"

```
┌─────────────────────────────────────┐
│  🎯 推荐商品：手作陶瓷香薰灯         │
├─────────────────────────────────────┤
│  匹配度：92%                        │
│                                     │
│  ✅ 符合你的3个关键需求：             │
│     • 500元预算内（实际¥368）         │
│     • 文艺风格，原创设计              │
│     • 支持生日刻字，仪式感强          │
│                                     │
│  📊 数据支撑：                       │
│     • 同类用户购买转化率 23%          │
│     • 收到礼物的女生好评率 96%        │
│     • "很有品味"被提及 147次          │
│                                     │
│  ⚡ 限时优势：                       │
│     • 下单后48小时发货，生日前必达     │
│     • 新客首单减30元                  │
│                                     │
│  🔄 对比说明：                       │
│     比热门口红（YSL#21）→ 更独特不撞礼 │
│     比网红玩偶 → 更实用且显档次       │
└─────────────────────────────────────┘
```

---

## 六、系统架构图

```
用户输入
    ↓
[意图识别层] ──→ 历史订单查询 ──→ 用户画像补全
    ↓
[需求结构化] ──→ 生成需求标签集
    ↓
[候选召回] ──→ 商品池过滤 + 协同过滤
    ↓
[精排打分] ──→ 综合排序 TOP-N
    ↓
[解释生成] ──→ 每款商品生成推荐理由
    ↓
[展示输出] ──→ 商品卡片 + 解释 + 快捷操作
    ↓
用户反馈 ──→ 更新画像 + 学习优化
```

---

## 附录：核心原则

1. **1-2轮完成识别**：不拖泥带水，快速收敛
2. **每推荐必解释**：用户知道为什么选它
3. **历史即资产**：每次对话都沉淀为画像
4. **场景化触发**：节日、天气、事件主动推荐